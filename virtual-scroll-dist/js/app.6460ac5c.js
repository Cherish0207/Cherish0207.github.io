(function(t){function e(e){for(var n,s,a=e[0],l=e[1],u=e[2],f=0,h=[];f<a.length;f++)s=a[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,a=1;a<i.length;a++){var l=i[a];0!==r[l]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},r={app:0},o=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var c=l;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");for(var n=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("VirtualList",{attrs:{size:40,remain:8,items:t.items,variable:!0},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.item;return i("item",{attrs:{item:e}})}}])})],1)},o=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"viewport",staticClass:"viewport",on:{scroll:t.throttleFn}},[i("div",{ref:"scrollbar",staticClass:"scrollbar"}),i("div",{ref:"scrolllist",staticClass:"scrolllist",style:{transform:"translate3d(0,"+t.offset+"px, 0)"}},t._l(t.visibleData,(function(e){return i("div",{key:e.id,ref:"items",refInFor:!0,attrs:{vid:e.id}},[t._t("default",null,{item:e})],2)})),0)])},a=[],l=(i("a9e3"),i("fb6a"),i("159b"),i("d81d"),i("0f32")),u=i.n(l),c={props:{size:Number,remain:Number,items:Array,variable:Boolean},data:function(){return{start:0,end:this.remain,offset:0,position:[]}},created:function(){this.throttleFn=u()(this.scrollFn,200,{leading:!1})},computed:{prevCount:function(){return Math.min(this.start,this.remain)},nextCount:function(){return Math.min(this.items.length-this.end,this.remain)},visibleData:function(){var t=this.start-this.prevCount,e=this.end+this.nextCount;return this.items.slice(t,e)}},mounted:function(){this.$refs.viewport.style.height=this.size*this.remain+"px",this.$refs.scrollbar.style.height=this.size*this.items.length+"px",this.cacheList()},updated:function(){var t=this;console.log("updated"),this.$nextTick((function(){var e=t.$refs.items;e&&e.length>0&&(e.forEach((function(e){var i=e.getBoundingClientRect(),n=i.height,r=e.getAttribute("vid")-0,o=t.position[r].height,s=o-n;if(s){t.position[r].height=n,t.position[r].bottom-=s;for(var a=r+1;a<t.position.length;a++)t.position[a].top=t.position[a-1].bottom,t.position[a].bottom-=s}})),t.$refs.scrollbar.style.height=t.position[t.position.length-1].bottom+"px")}))},methods:{cacheList:function(){var t=this;this.position=this.items.map((function(e,i){return{top:t.size*i,bottom:t.size*(i+1),height:t.size}}))},getStartIndex:function(t){var e=0,i=this.position.length-1,n=null;while(e<i){var r=parseInt((e+i)/2),o=this.position[r].bottom;if(o===t)return r+1;o<t?e=r+1:o>t&&((null===n||n>r)&&(n=r),i=r-1)}return n},scrollFn:function(){console.log("scroll");var t=this.$refs.viewport.scrollTop;this.variable?(this.start=this.getStartIndex(t),this.offset=this.position[this.start-this.prevCount]?this.position[this.start-this.prevCount].top:0):(this.start=Math.floor(t/this.size),this.offset=(this.start-this.prevCount)*this.size),this.end=this.start+this.remain}}},f=c,h=(i("c8f2"),i("2877")),p=Object(h["a"])(f,s,a,!1,null,null,null),d=p.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{padding:"5px 10px",border:"1px solid skyblue",background:"orange"}},[t._v(" "+t._s(t.item.id)+"===== "+t._s(t.item.value)+" ")])},m=[],b={props:{item:Object}},g=b,y=Object(h["a"])(g,v,m,!1,null,null,null),x=y.exports,_=i("96eb"),w=i.n(_),O=[],j=0;j<1e4;j++)O.push({id:j,value:w.a.Random.sentence(5,50)});var C={data:function(){return{items:O}},components:{VirtualList:d,item:x}},$=C,z=(i("034f"),Object(h["a"])($,r,o,!1,null,null,null)),S=z.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(S)}}).$mount("#app")},"85ec":function(t,e,i){},a2ef:function(t,e,i){},c8f2:function(t,e,i){"use strict";i("a2ef")}});
//# sourceMappingURL=app.6460ac5c.js.map