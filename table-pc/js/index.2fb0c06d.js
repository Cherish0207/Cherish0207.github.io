(function(t){function e(e){for(var s,n,r=e[0],l=e[1],h=e[2],d=0,u=[];d<r.length;d++)n=r[d],o[n]&&u.push(o[n][0]),o[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(u.length)u.shift()();return a.push.apply(a,h||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],s=!0,r=1;r<i.length;r++){var l=i[r];0!==o[l]&&(s=!1)}s&&(a.splice(e--,1),t=n(n.s=i[0]))}return t}var s={},o={index:0},a=[];function n(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=s,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/table-pc/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var h=0;h<r.length;h++)e(r[h]);var c=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("c31f")},1:function(t,e){},2:function(t,e){},"20ab":function(t,e,i){"use strict";var s=i("7b4c"),o=i.n(s);o.a},"41fa":function(t,e,i){},"429a":function(t,e,i){},"4f63":function(t,e,i){"use strict";var s=i("ae42"),o=i.n(s);o.a},"7b4c":function(t,e,i){},"8dc3":function(t,e,i){"use strict";var s=i("41fa"),o=i.n(s);o.a},a2c1:function(t,e,i){},ae42:function(t,e,i){},c31f:function(t,e,i){"use strict";i.r(e);var s=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app"},[i("div",{staticClass:"btn"},[i("button",{on:{click:function(e){e.preventDefault(),t.view="large-list1"}}},[t._v("large-list1")]),i("button",{on:{click:function(e){e.preventDefault(),t.view="large-list2"}}},[t._v("large-list2")]),i("button",{on:{click:function(e){e.preventDefault(),t.view="small-list"}}},[t._v("small-list")])]),i("keep-alive",["small-list"===t.view?i("small-li"):"large-list1"===t.view||"large-list2"===t.view?i("large-li",{ref:"largeLi",attrs:{objReqParam:t.objReqParam}}):i("static-small-li")],1)],1)},a=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"largelist-demo"},[i("large-list",{ref:"largeList",attrs:{showTitle:!1,showScroller:!1,titleHeight:t.titleHeight,contentHeight:t.contentHeight,contentWidth:t.contentWidth,theme:t.theme,fieldsConfig:t.fieldsConfig,objReqParam:t.objReqParam,cacheDATA:t.cacheData,objListCache:t.objListCache,focusedOBJ:""},on:{"right-click":t.rightclick,"dbl-click":t.dblclick,"left-click":t.leftclick,"fieldsConfig-ischange":t.fieldsConfigChange,"focused-ischange":t.focusedObjIschange,"cachedata-ischange":t.cachedataIschange,"objlist-ischange":t.objlistIschange}})],1)},r=[];const l=1e-8,h=function(t,e,i,s,o,a){let n=Number(t);if((null==t||isNaN(n)||n===1/0||n===-1/0)&&!1!==s)return"string"===typeof s?s:"--";const r=Math.abs(n),h=n;return i=i||"",e=null!=e?e:2,i&&(i.indexOf("B")>=0&&r>=1e9?(i="B",n/=1e9):i.indexOf("万亿")>=0&&r>=1e12?(i="万亿",n/=1e12):i.indexOf("亿")>=0&&r>=1e8?(i="亿",n/=1e8):i.indexOf("M")>=0&&r>=1e6?(i="M",n/=1e6):i.indexOf("万")>=0&&r>=1e4?(i="万",n/=1e4):i.indexOf("K")>=0&&r>=1e3?(i="K",n/=1e3):100===i?(i="",n/=100):"%"===i?n*=100:i=""),n===h&&!0===o&&(e=0),a&&(n=Math.abs(n)),(n+l).toFixed(e)+i},c=function(t,e=2,i=!1){return h(t,e)},d=function(t,e=2,i=!0,s=100){return s||(s=1),null!=t&&(t/=s),i&&t>0?"+"+h(t,e):h(t,e)},u=function(t,e=0,i=["","stock-up","stock-down"]){return!i||i.length<=2?"":t>e?i[1]:t<e?i[2]:i[0]},m=function(t,e=100,i=2){return e||(e=1),null!=t&&(t/=e),h(t,i,"万亿",!0,!0)};function f(t,e,i){let s;return function(){let o=this,a=arguments,n=function(){s=null,i||t.apply(o,a)},r=i&&!s;window.clearTimeout(s),s=window.setTimeout(n,e),r&&t.apply(o,a)}}function g(t,e,i){let s,o=new Date;return function(){let a=this,n=arguments,r=new Date;window.clearTimeout(s),r-o>=i?(t.apply(a,n),o=r):s=window.setTimeout(t,e)}}function b(t,e){for(let i=0;i<e.length;i++)if(t===e[i])return!0;return!1}var p={formatPrice:c,formatStockText:h,formatColor:u,formatRatio:d,formatVolume:m,debounce:f,throttle:g,oneOf:b};const C={tableTitleColor:"#222",tableTitleBgColor:"#f3f8ff",tableTitleBdColor:"#aec1da",tableContentColor:"#222",tableContentBgColor:"#fff",tableContentHoverBgColor:"#ecf2ff",tableContentActiveBgColor:"#d0e1f1",tableContentBdColor:"#dfe4ea",scrollerBgColor1:"#b9c9de",scrollerBgColor2:"#e7e7ec",scrollerBgColor3:"#fff",volColor:"#3e6ac5",greenColor:"#1ca049",redColor:"#ee2c2c",dynaComponentDynaColor:"#ff8850",normalColor:"#9aa4b4"},w=[{field:"XuHao",title:"序号",width:90,fixed:!0,titleAlign:"center",contentAlign:"left",textColor:C.normalColor},{field:"Obj",title:"代码",width:90,titleAlign:"left",contentAlign:"left",fixed:!0},{field:"ZhongWenJianCheng",title:"名称",width:100,fixed:!0},{field:"ZuiXinJia",title:"最新",width:90,updownStyle:!0,highlightPolicy:"updown"},{field:"ZhangDie",title:"涨跌",width:90,updownStyle:!0,highlightPolicy:"updown"},{field:"ZhangFu",title:"涨幅%",width:90,updownStyle:!0,titleAlign:"left",highlightPolicy:"updown"},{field:"ChengJiaoLiang",title:"总手",width:110,unit:"万/亿",textColor:C.volColor},{field:"HuanShou",title:"换手率%",width:90,textColor:C.volColor},{field:"XianShou",title:"现手",width:90,isVolume:!0,isAutoPrec:!0,unit:"万/亿",strategy:"xianshou"},{field:"ChengJiaoE",title:"成交额",width:90,isAutoPrec:!0,unit:"万/亿",textColor:C.volColor},{field:"FenZhongZhangFu5",title:"涨速%",width:90,updownStyle:!0,highlightPolicy:"updown",precision:2},{field:"ZuoShou",title:"昨收",width:90},{field:"KaiPanJia",title:"开盘",width:90,updownStyle:!0,compareField:"ZuoShou"},{field:"ZuiGaoJia",title:"最高价",width:90,updownStyle:!0,compareField:"ZuoShou"},{field:"ZuiDiJia",title:"最低价",width:90,updownStyle:!0,compareField:"ZuoShou"},{field:"HangYe",title:"行业",width:90},{field:"ShiYingLv",title:"市盈率",width:90,textColor:C.dynaComponentDynaColor,format(t,e){var i=e.field,s=p.formatPrice(t[i]),o=t[i+"_format"]||s||"--",a=t["BaoGaoQi"];if(null!=s&&null!=a){var n=a.slice(4,6)-0,r=parseInt(n/4);return o+["①","②","③","④"][r]}return o}},{field:"ShiJingLv",title:"市净率",width:90,textColor:C.dynaComponentDynaColor,format(t){return p.formatPrice(t.ShiJingLv,null,!1)}},{field:"ShiXiaoLv",title:"市销率",width:90,textColor:C.dynaComponentDynaColor,format(t,e){var i=e.field,s=p.formatPrice(t[i]),o=t[i+"_format"]||s||"--",a=t["BaoGaoQi"];if(null!=s&&null!=a){var n=a.slice(4,6)-0,r=parseInt(n/4);return o+["①","②","③","④"][r]}return o}},{field:"WeiTuoMaiRuJia1",title:"委买价",width:90,updownStyle:!0,compareField:"ZuoShou",highlightPolicy:"updown"},{field:"WeiTuoMaiChuJia1",title:"委卖价",width:90,updownStyle:!0,compareField:"ZuoShou",highlightPolicy:"updown"},{field:"NeiPan",title:"内盘",width:90,isVolume:!0,isAutoPrec:!0,unit:"万/亿",textColor:C.greenColor,isAbs:!0},{field:"WaiPan",title:"外盘",width:90,isVolume:!0,isAutoPrec:!0,unit:"万/亿",textColor:C.redColor,isAbs:!0},{field:"ZhenFu",title:"振幅%",width:90,textColor:C.volColor,precision:2},{field:"LiangBi",title:"量比",width:90,textColor:C.volColor,precision:2},{field:"JunJia",title:"均价",width:90,updownStyle:!0,compareField:"ZuoShou"},{field:"WeiBi",title:"委比%",width:90,updownStyle:!0,precision:2},{field:"WeiCha",title:"委差",width:90,updownStyle:!0,isAutoPrec:!0,unit:"万/亿"},{field:"ZongShiZhi",title:"总市值",width:90,isAutoPrec:!0,unit:"万/亿",ratio:1e4,textColor:C.dynaComponentDynaColor},{field:"LiuTongShiZhi",title:"流通市值",width:90,isAutoPrec:!0,unit:"万/亿",ratio:1e4,textColor:C.dynaComponentDynaColor},{field:"BaoGaoQi",invisible:!0},{field:"LeiXing",invisible:!0},{field:"RongZiRongQuanBiaoJi",invisible:!0},{field:"LiuTongAGu",invisible:!0},{field:"XiaoShuWei",invisible:!0},{field:"ChengJiaoLiangDanWei",invisible:!0},{field:"WeiTuoMaiRuJia1",invisible:!0},{field:"WeiTuoMaiChuJia1",invisible:!0}],v={};w.forEach(t=>{t.invisible||(v[t.field]=t.title)});var y={name:"largelist-demo",data(){return{theme:C,fieldsConfig:w,contentHeight:0,contentWidth:document.documentElement.clientWidth,titleHeight:40,focusedObj:"",objListCache:{},cacheData:{}}},props:{objReqParam:{type:Object}},created(){this.contentHeight=document.documentElement.clientHeight-this.titleHeight,this.resizeFunc=this.$Utils.debounce(()=>{this.contentHeight=document.documentElement.clientHeight-this.titleHeight,this.contentWidth=document.documentElement.clientWidth},300),window.addEventListener("resize",this.resizeFunc),window.setTimeout(()=>{this.$refs.largeList.initState()})},methods:{initState(){this.$refs.largeList.initState()},rightclick(t){},dblclick(t){},leftclick(t){},fieldsConfigChange(t){this.fieldsConfig=t},focusedObjIschange(t,e){this.focusedObj=t,this.focusedIndex=e},cachedataIschange(t){this.cacheData=t},objlistIschange(t){let e=this.$Utils.getKeyFromParams(this.objReqParam);this.objListCache[e]=t}},watch:{objReqParam(){this.$refs.largeList.initState()}},beforeDestroy(){window.removeEventListener("resize",this.resizeFunc)}},j=y,x=(i("20ab"),i("2877")),S=Object(x["a"])(j,n,r,!1,null,null,null),k=S.exports,O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"smallist-demo"},[i("small-list",{attrs:{showTitle:!0,showScroller:!0,height:50,theme:t.theme,fields:t.fields,title:t.title,titleAlign:t.titleAlign,focusedObj:t.focusedObj,objReqParam:t.objReqParam},on:{"right-click":t.rightclick,"dbl-click":t.dblclick,"left-click":t.leftclick,"focused-ischange":t.focusedObjIschange}},[i("template",{slot:"loading"},[i("p",[t._v("loading content")])])],2)],1)},D=[],L={name:"smallist-demo",data(){return{fields:["ZhongWenJianCheng","ZuiXinJia","ZhangFu"],titleAlign:"left",theme:C,title:v,focusedObj:"",objReqParam:{obj:"SH600000,SH600001,SH600002,SH600003,SH600004,SH600005,SH600006,SH600007,SH600008,SH600009,SH600010,SH600011,SH600012,SH600015,SH600016,SH600017,SH600018,SH600019,SH600020,SH600021,SH600022,SH600023,SH600025,SH600026,SH600027,SH600028,SH600029,SH600030,SH600031,SH600033",start:0,count:30,field:"ZhongWenJianCheng"}}},methods:{rightclick(t){},dblclick(t){},leftclick(t){},focusedObjIschange(t){this.focusedObj=t}}},B=L,T=(i("e9f1"),Object(x["a"])(B,O,D,!1,null,null,null)),H=T.exports,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"smallist-demo"},[t.searchResult.length>0?i("static-small-list",{attrs:{theme:t.theme,fields:t.fields,showTitle:!1,titleAlign:t.titleAlign,showScroller:!0,height:30,FOCUSOBJ:t.focusedObj,objList:t.searchResult},on:{"right-click":t.rightclick,"dbl-click":t.dblclick,"left-click":t.leftclick,"focused-ischange":t.focusedObjIschange},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.fields,function(s,o){return i("span",{key:o,style:"width: "+100/t.fields.length+"%;"},[t._v("\n        "+t._s(e.data[s]||"--")+"\n      ")])})}}],null,!1,307953029)},[i("template",{slot:"loading"},[i("p",[t._v("loading content")])])],2):t._e()],1)},E=[],F={name:"static-smallist-demo",data(){return{fields:["DaiMa","MingCheng","ShuXing"],titleAlign:"left",theme:C,title:v,focusedObj:"",searchResult:[]}},created(){this.showSearchResult()},methods:{rightclick(t){},dblclick(t){},leftclick(t){},focusedObjIschange(t,e){this.focusedObj=t.DaiMa},showSearchResult(t){this.$dzhyun.query("/kbspirit",{input:"6",kuozhan:0,count:80,type:"6",market:"SH,SZ,B$"},t=>{!t||t instanceof Error||!t[0].JieGuo||(this.searchResult=t[0].JieGuo[0].ShuJu,this.focusedObj=this.searchResult[0].DaiMa)})}}},M=F,I=(i("df10"),Object(x["a"])(M,A,E,!1,null,null,null)),_=I.exports,R={data(){return{view:"static-small-list",objReqParam1:{gql:"block=市场/沪深市场/上证A股",field:"ZhongWenJianCheng"},objReqParam2:{gql:"block=市场/沪深市场/深证A股",field:"ZhongWenJianCheng"}}},computed:{objReqParam(){return"large-list1"===this.view?this.objReqParam1:this.objReqParam2}},components:{largeLi:k,smallLi:H,staticSmallLi:_},watch:{view(t,e){}}},J=R,Z=(i("c62a"),Object(x["a"])(J,o,a,!1,null,"3c1153db",null)),P=Z.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"large-list"},[i("div",{staticClass:"table-scroll",style:{width:t.totalWidth+"px"}},[i("div",{staticClass:"table-title",style:{backgroundColor:t.theme.tableTitleBgColor,color:t.theme.tableTitleColor,borderBottom:"1px solid "+t.theme.tableTitleBdColor,borderTop:"1px solid "+t.theme.tableTitleBdColor,height:(t.titleHeight||30)+"px"}},[i("div",{style:{width:t.fixedWidth+"px",height:(t.titleHeight||30)+"px",lineHeight:(t.titleHeight||30)+"px"}},t._l(t.fixedFields,function(e,s){return i("span",{key:s,staticClass:"th",style:(e.titleAlign?"text-align:"+e.titleAlign+";":"")+"width:"+(e.width||90)+"px; background-color: "+t.theme.tableTitleBgColor+"; border-right: 1px solid "+t.theme.tableTitleBdColor+";",attrs:{name:e.field},on:{click:t.reSort}},[t._v("\n          "+t._s(e.title)+"\n          "),t.ORDERBY===e.field?i("i",{class:"iconfont icon-arrow-"+(2===t.DESC?"up":"")+(1===t.DESC?"down":"")}):t._e(),i("i",{staticClass:"width-changer",on:{mousedown:function(e){return t.widthChanging(e,s)}}})])}),0),i("div",{style:{width:t.conWidth+"px",left:t.fixedWidth-t.x+"px",height:(t.titleHeight||30)+"px",lineHeight:(t.titleHeight||30)+"px"},on:{dragstart:t.dragStart,drag:t.dragging,dragend:t.dragEnd,drop:t.drop}},t._l(t.conFields,function(e,s){return i("span",{key:s,staticClass:"th",style:(e.titleAlign?"text-align:"+e.titleAlign+";":"")+"width:"+(e.width||90)+"px; background-color: "+t.theme.tableTitleBgColor+"; border-right: 1px solid "+t.theme.tableTitleBdColor+";",attrs:{name:e.field,draggable:"true"},on:{click:t.reSort}},[t._v("\n          "+t._s(e.title)+"\n          "),t.ORDERBY===e.field?i("i",{class:"iconfont icon-arrow-"+(2===t.DESC?"up":"")+(1===t.DESC?"down":"")}):t._e(),i("i",{staticClass:"width-changer",style:{cursor:t.cursor},on:{mousedown:function(e){return t.widthChanging(e,s+t.fixedFields.length)}}})])}),0)]),t.dataList[0]?i("div",{staticClass:"table-content",style:{backgroundColor:t.theme.tableContentBgColor,color:t.theme.tableContentColor,height:t.contentHeight+"px"},on:{"&mousewheel":function(e){return t.mousewheel(e)}}},t._l(t.dataList,function(e,s){return i("div",{key:s,staticClass:"table-item",style:{height:t.itemHeight+"px",lineHeight:t.itemHeight+"px",borderBottom:"1px solid "+t.theme.tableContentBdColor,backgroundColor:t.focusedObj===e.Obj?t.theme.tableContentActiveBgColor:t.hoverObj===e.Obj?t.theme.tableContentHoverBgColor:t.theme.tableContentBgColor},attrs:{name:e.Obj},on:{contextmenu:function(t){t.preventDefault()},mouseup:function(i){return t.mouseup(i,e.Obj)},mouseover:function(i){t.hoverObj=e.Obj},mouseleave:function(e){t.hoverObj=""}}},[i("list-cell",{staticClass:"item-fixed",style:{width:t.fixedWidth+"px",backgroundColor:t.focusedObj===e.Obj?t.theme.tableContentActiveBgColor:t.hoverObj===e.Obj?t.theme.tableContentHoverBgColor:t.theme.tableContentBgColor},attrs:{Fields:t.fixedFields,theme:t.theme,item:e,index:s,start:t.start}}),i("list-cell",{staticClass:"item-unfixed",style:{width:t.conWidth+"px",left:t.fixedWidth-t.x+"px",backgroundColor:t.focusedObj===e.Obj?t.theme.tableContentActiveBgColor:t.hoverObj===e.Obj?t.theme.tableContentHoverBgColor:t.theme.tableContentBgColor},attrs:{Fields:t.conFields,theme:t.theme,item:e,index:s,start:t.start,lastData:e.lastData}})],1)}),0):i("div",{staticClass:"table-content",style:{height:t.contentHeight+"px"}},t._l(t.dataList,function(e,s){return i("div",{key:s,staticClass:"table-item",style:{height:t.itemHeight+"px",lineHeight:t.itemHeight+"px"}},[i("div",{staticClass:"item-fixed",style:{backgroundColor:t.theme.tableContentBgColor},attrs:{Fields:t.fixedFields,theme:t.theme,item:e,index:s,start:t.start}},t._l(t.fixedFields,function(e,s){return i("span",{key:s,style:(e.contentAlign?"text-align:"+e.contentAlign+";":"")+"width: "+(e.width||90)+"px;"+(e.textColor?"color: "+e.textColor+";":"")+"border-right:1px solid "+t.theme.tableContentBdColor+";",attrs:{name:e.field}},[t._v("--\n          ")])}),0),i("div",{staticClass:"item-unfixed",style:{height:t.itemHeight+"px",lineHeight:t.itemHeight+"px",width:t.conWidth+"px",left:t.fixedWidth-t.x+"px",backgroundColor:t.theme.tableContentBgColor}},t._l(t.conFields,function(e,s){return i("span",{key:s,style:(e.contentAlign?"text-align:"+e.contentAlign+";":"")+"width: "+(e.width||90)+"px;"+(e.textColor?"color: "+e.textColor+";":"")+"border-right:1px solid "+t.theme.tableContentBdColor+";",attrs:{name:e.field}},[t._v("--\n          ")])}),0)])}),0)]),i("div",{staticClass:"table-scroller",style:{backgroundColor:t.theme.scrollerBgColor2,color:t.theme.scrollerBgColor2,height:t.contentHeight+t.titleHeight-9+"px"}},[i("div",{staticClass:"scroller-top",style:{backgroundColor:t.theme.scrollerBgColor1}},[i("i",{style:{borderColor:"transparent transparent"+t.theme.scrollerBgColor3+" transparent"}})]),i("div",{staticClass:"scroller-bottom",style:{backgroundColor:t.theme.scrollerBgColor1},attrs:{id:"scrollerBottom"}},[i("i",{style:{borderColor:t.theme.scrollerBgColor3+" transparent transparent transparent"}})]),i("div",{staticClass:"scroller-scrolling",style:{backgroundColor:t.theme.scrollerBgColor1},attrs:{id:"scroller"},on:{mousedown:t.scrolling}})]),i("div",{staticClass:"table-scroller-lr",style:{backgroundColor:t.theme.scrollerBgColor2,width:t.contentWidth-9+"px"},attrs:{id:"scrollLR"}},[i("div",{staticClass:"scroller-left",style:{backgroundColor:t.theme.scrollerBgColor1}},[i("i",{style:{borderColor:"transparent "+t.theme.scrollerBgColor3+" transparent transparent"}})]),i("div",{staticClass:"scroller-right",style:{backgroundColor:t.theme.scrollerBgColor1},attrs:{id:"scrollerRight"}},[i("i",{style:{borderColor:"transparent transparent transparent "+t.theme.scrollerBgColor3}})]),i("div",{ref:"scrollerLR",staticClass:"scroller-scrolling",style:{left:t.scrollLRLeft+"px",backgroundColor:t.theme.scrollerBgColor1},on:{mousedown:t.scrollingLR}})])])},$=[],W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.Fields,function(e,s){return i("span",{key:s,style:(e.contentAlign?"text-align:"+e.contentAlign+";":"")+"width: "+(e.width||90)+"px;"+(e.textColor?"color: "+e.textColor+";":"")+t.item[e.field+"Style"]+";border-right:1px solid "+t.theme.tableContentBdColor+";"+t.getColor(e),attrs:{name:e.field}},[[t._v(t._s(t.item&&t.format(e)||"--"))]],2)}),0)},X=[];const N=1e-8,Y=function(t,e,i,s,o,a){let n=Number(t);if((null==t||isNaN(n)||n===1/0||n===-1/0)&&!1!==s)return"string"===typeof s?s:"--";const r=Math.abs(n),l=n;return i=i||"",e=null!=e?e:2,i&&(i.indexOf("B")>=0&&r>=1e9?(i="B",n/=1e9):i.indexOf("万亿")>=0&&r>=1e12?(i="万亿",n/=1e12):i.indexOf("亿")>=0&&r>=1e8?(i="亿",n/=1e8):i.indexOf("M")>=0&&r>=1e6?(i="M",n/=1e6):i.indexOf("万")>=0&&r>=1e4?(i="万",n/=1e4):i.indexOf("K")>=0&&r>=1e3?(i="K",n/=1e3):100===i?(i="",n/=100):"%"===i?n*=100:i=""),n===l&&!0===o&&(e=0),a&&(n=Math.abs(n)),(n+N).toFixed(e)+i},Q=function(t,e=2,i=!1){return Y(t,e)},z=function(t,e=2,i=!0,s=100){return s||(s=1),null!=t&&(t/=s),i&&t>0?"+"+Y(t,e):Y(t,e)},G=function(t,e=0,i=["","stock-up","stock-down"]){return!i||i.length<=2?"":t>e?i[1]:t<e?i[2]:i[0]},K=function(t,e=100,i=2){return e||(e=1),null!=t&&(t/=e),Y(t,i,"万亿",!0,!0)};function U(t,e,i){let s;return function(){let o=this,a=arguments,n=function(){s=null,i||t.apply(o,a)},r=i&&!s;window.clearTimeout(s),s=window.setTimeout(n,e),r&&t.apply(o,a)}}function V(t,e,i){let s,o=new Date;return function(){let a=this,n=arguments,r=new Date;window.clearTimeout(s),r-o>=i?(t.apply(a,n),o=r):s=window.setTimeout(t,e)}}function tt(t,e){for(let i=0;i<e.length;i++)if(t===e[i])return!0;return!1}function et(t){let{obj:e,gql:i,market:s,selfStock:o}=t||{},a="";return i&&(a=i.split("/")[2]),o&&(a="selfStock"),a}function it(t){}var st={formatPrice:Q,formatStockText:Y,formatColor:G,formatRatio:z,formatVolume:K,debounce:U,throttle:V,oneOf:tt,getKeyFromParams:et,keyUnlock:it},ot={name:"list-cell",props:{Fields:{type:Array,required:!0},theme:{type:Object,required:!0},item:{type:Object,required:!0},index:{type:Number,required:!0},start:{type:Number,required:!0},lastData:{type:Object,required:!1}},methods:{getColor(t){let e="",{textColor:i,updownStyle:s,compareField:o,field:a,strategy:n}=t,{ZuiXinJia:r,ZuoShou:l}=this.item;if(i)e=i;else if(!0===s){if(o=o||"ZuoShou","ZuoShou"===o){let t=0;["ZuiXinJia","KaiPanJia","ZuiGaoJia","ZuiDiJia","WeiTuoMaiRuJia1","WeiTuoMaiChuJia1","JunJia"].indexOf(a)>-1?t=this.item[a]-l:["ZuiXinJia","ZhangFu","ZhangDie"].indexOf(a)>-1?t=r-l:["ZhangSu","WeiCha","WeiBi","FenZhongZhangFu5"].indexOf(a)>-1&&(t=this.item[a]),e=t>0?this.theme.redColor:t<0?this.theme.greenColor:this.theme.normalColor}}else{if("xianshou"!==n)return"";e=this.theme.normalColor,this.lastData&&(this.item.ZuiXinJia<=this.lastData.WeiTuoMaiRuJia1?e=this.theme.greenColor:this.item.ZuiXinJia>=this.lastData.WeiTuoMaiChuJia1?e=this.theme.redColor:this.item.ZuiXinJia===this.lastData.ZuiXinJia?e=this.theme.normalColor:this.item.ZuiXinJia>this.lastData.ZuiXinJia?e=this.theme.redColor:this.item.ZuiXinJia<this.lastData.ZuiXinJia&&(e=this.theme.greenColor))}return`color:${e};`},format(t){if(!this.item||"{}"===JSON.stringify(this.item)||!t.field)return"--";let{field:e,unit:i,ratio:s,format:o,precision:a}=t,n=this.item[e];if(o)return t.format(this.item,t);switch(s&&(n*=s),e){case"XuHao":n=this.start+this.index+1;break;case"Obj":n=(this.item.Obj||"").slice(2)||"--";break;case"ZhongWenJianCheng":case"HangYe":break;case"ZuiXinJia":case"ZuoShou":case"KaiPanJia":case"ZuiGaoJia":case"ZuiDiJia":case"WeiTuoMaiRuJia1":case"WeiTuoMaiChuJia1":case"JunJia":case"ZhangFu":case"FenZhongZhangFu5":case"WeiBi":case"HuanShou":n=this.formatPrice(n,a);break;case"ZhangDie":n=this.formatPrice(n,a,!0);break;case"ShiYingLv":case"ShiJingLv":case"ShiXiaoLv":n=this.formatPrice(n,null,!1);break;case"ChengJiaoLiang":case"XianShou":n=this.formatVolume(n,100,2);break;case"NeiPan":case"WaiPan":n=this.formatStockText(n/100,2,i,!0,!0,!0);break;case"ChengJiaoE":case"ZongShiZhi":case"LiuTongShiZhi":case"WeiCha":n=this.formatVolume(n,1,2);break;default:n=this.formatPrice(n);break}return n},formatStockText:st.formatStockText,formatPrice:st.formatPrice,formatRatio:st.formatRatio,formatColor:st.formatColor,formatVolume:st.formatVolume}},at=ot,nt=Object(x["a"])(at,W,X,!1,null,null,null),rt=nt.exports,lt={name:"large-list",components:{ListCell:rt},props:{cacheTimer:{type:Number,default:1},focusedOBJ:{type:String},cacheDATA:{type:Object,default(){return{}}},objListCache:{type:Object,default(){return{}}},fieldsConfig:{type:Array,required:!0},theme:{type:Object,required:!0},objReqParam:{type:Object,default(){return{gql:"block=市场/沪深市场/沪深A股",field:"ZhongWenJianCheng"}}},desc:{type:Number,default:0},orderby:{type:String,default:"ZhangFu"},showTitle:{type:Boolean,default:!0},titleHeight:{type:Number,default:30},showScroller:{type:Boolean,default:!0},contentHeight:{type:Number,default:700},contentWidth:{type:Number,default:700},signEvent:{type:Boolean,default:!1}},data(){return{objList:[],cacheData:{},dataList:[],DESC:0,ORDERBY:"",start:0,focusedObj:"",count:20,itemHeight:30,hoverObj:"",x:0,cache_x:0,count_x:0,addx:0,topMax:0,leftMax:0,activeIndex:null,scrollLRLeft:10,i:0,cursor:"e-resize",keydownAccess:!0,focusedIndex:0}},watch:{objList:{handler(t){this.$emit("objlist-ischange",t)},deep:!0},cacheData:{handler(t){this.$emit("cachedata-ischange",t)},deep:!0},focusedObj(t){this.$emit("focused-ischange",t,this.focusedIndex)},objReqParam(t,e){this.cancelAll();let i=this.$Utils.getKeyFromParams(t);this.objList=this.objListCache[i]||[],this.cacheData=this.cacheDATA,this.dataList=[],this.start=0,this.objList.length?(this.updateDataList(),this.changeTopFromStart()):this.initData(),this.$nextTick(()=>{this.objReqParam.obj||(this.updateObjListInterval=window.setInterval(()=>{this.initData()},5e3)),this.bindDomEvent()})},contentHeight(t){let e=this.count;this.count=Math.ceil((t-10)/30),this.topMax=t+this.titleHeight-document.querySelector("#scroller").offsetHeight-document.querySelector("#scrollerBottom").offsetHeight-document.querySelector("#scrollLR").offsetHeight,this.count!==e&&(this.itemHeight=(t-10)/this.count,this.updateDataList())}},computed:{totalWidth(){return this.fixedWidth+this.conWidth},fixedFields(){return this.fieldsConfig.filter(t=>t.fixed&&!0!==t.invisible)},fixedWidth(){let t=0;return this.fixedFields.forEach(e=>{t+=e.width||90}),t},conFields(){return this.fieldsConfig.filter(t=>!t.fixed&&!0!==t.invisible)},conWidth(){let t=0;return this.conFields.forEach(e=>{t+=e.width||90}),t},fields(){return this.fieldsConfig.map(t=>t.field)}},activated(){this.init()},created(){this.init(),window.setTimeout(()=>{this.topMax=this.contentHeight+this.titleHeight-document.querySelector("#scroller").offsetHeight-document.querySelector("#scrollerBottom").offsetHeight-document.querySelector("#scrollLR").offsetHeight,this.leftMax=document.querySelector("#scrollLR").offsetWidth-3*document.querySelector("#scrollerRight").offsetWidth,this.leftMin=document.querySelector("#scrollerRight").offsetWidth+1})},methods:{cancelAll(){this.cancelQuery(),this.cancelSubscribe(),document.removeEventListener("keyup",this.keyupFunc),document.removeEventListener("keydown",this.keydownFunc),document.ondragover=null,document.ondrop=null,window.clearInterval(this.updateObjListInterval),this.init.isInited=!1},initState(){this.DESC=this.desc,this.ORDERBY=this.orderby;let t=Math.ceil((this.contentHeight-10)/30);this.itemHeight=(this.contentHeight-10)/t,this.count=t,this.cacheData=this.cacheDATA||{};let e=this.$Utils.getKeyFromParams(this.objReqParam);this.objList=this.objListCache[e]||[],this.focusedObj!==this.focusedOBJ&&(this.focusedObj=this.focusedOBJ,this.start=this.initStart(this.objList,this.focusedObj,this.count),window.setTimeout(()=>{this.changeTopFromStart()}))},initStart(t,e,i){let s=0;return 0===t.length?0:(e&&(s=s>i-1?s:0,s=Math.max(0,t.findIndex(t=>t.Obj===e)),s=Math.min(t.length-i,s)),s)},init(){this.init.isInited||(this.init.isInited=!0,this.initState(),this.getObjList().then(t=>{let e=JSON.parse(JSON.stringify(this.objList));t.forEach((t,e)=>{this.$set(this.objList,e,t)});let i=e.findIndex(t=>t.Obj===this.focusedObj),s=this.objList.findIndex(t=>t.Obj===this.focusedObj);this.objList.length=t.length,this.objList.length>0&&i===s&&(this.start=this.initStart(this.objList,this.focusedObj,this.count)),this.objList.length?this.updateDataList():this.initData()}).catch(t=>{}),this.objReqParam.obj||(this.updateObjListInterval=window.setInterval(()=>{this.initData()},5e3)),this.bindDomEvent())},bindDomEvent(){this.keyupFunc=(t=>{t.preventDefault()}),this.keydownFunc=(t=>{t.preventDefault();let{keyCode:e,key:i}=t;this.keydown(e,i)}),document.addEventListener("keyup",this.keyupFunc),document.addEventListener("keydown",this.keydownFunc),document.ondragover=function(t){t.preventDefault()},document.ondrop=function(t){t.preventDefault()}},active(t,e){let i=document.querySelector(".table-content").childNodes;e!==this.activeIndex&&(null!==this.activeIndex&&(i[this.activeIndex].style.backgroundColor=this.theme.tableContentBgColor,i[this.activeIndex].childNodes[0].style.backgroundColor=this.theme.tableContentBgColor,i[this.activeIndex].childNodes[1].style.backgroundColor=this.theme.tableContentBgColor),i[e].style.backgroundColor=this.theme.tableContentActiveBgColor,i[e].childNodes[0].style.backgroundColor=this.theme.tableContentActiveBgColor,i[e].childNodes[1].style.backgroundColor=this.theme.tableContentActiveBgColor,this.activeIndex=e)},hover(t,e){this.activeIndex!==e&&(t.target.style.backgroundColor=this.theme.tableContentHoverBgColor,[].slice.call(t.target.childNodes).forEach(t=>{t.style.backgroundColor=this.theme.tableContentHoverBgColor}))},leave(t,e){this.activeIndex!==e&&(t.target.style.backgroundColor=this.theme.tableContentBgColor,[].slice.call(t.target.childNodes).forEach(t=>{t.style.backgroundColor=this.theme.tableContentBgColor}))},drop(t){t.dataTransfer.dropEffect="move",t.preventDefault(),t.stopPropagation()},dragStart(t){this.cursor="auto";let e=new Image;e.src="drag_image.png",t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(e,10,10);let i=t.target.getAttribute("name");this.dragItems=[].slice.call(document.querySelectorAll(`span[name="${i}"]`));let s=this.dragItems.originLeft=t.target.getBoundingClientRect().left;this.dragItems.clientX_s=t.clientX,this.dragItems.forEach((t,e)=>{t.cloneItem=t.cloneNode(!0),t.cloneItem.style.position="fixed",t.cloneItem.style.height=t.offsetHeight+"px",t.cloneItem.style.top=t.parentElement.parentElement.offsetTop+"px",t.cloneItem.style.left=s+"px",t.cloneItem.style.opacity=.75,t.cloneItem.style.borderLeft="1px solid #dfe4ea",t.cloneItem.style.zIndex=10,t.appendChild(t.cloneItem)})},dragging(t){t.preventDefault(),t.dropEffect="move";let e=this.dragItems.originLeft+t.clientX-this.dragItems.clientX_s+"px";this.dragItems.forEach(t=>{t.cloneItem.style.left=e}),t.stopPropagation()},dragEnd(t){let e=this.fieldsConfig.findIndex(e=>e.field===t.target.getAttribute("name"));t.preventDefault(),this.dragItems.forEach(t=>{t.removeChild(t.cloneItem)});let i=this.fixedFields.length+this.getCountX(t.target.offsetLeft+t.clientX-this.dragItems.clientX_s).count+1;if(e===i)return;let s=JSON.parse(JSON.stringify(this.fieldsConfig)),o=s.splice(e,1)[0];i>e?s.splice(i-1,0,o):i<e&&s.splice(i,0,o),this.$emit("fieldsConfig-ischange",s),this.cursor="e-resize",this.dragItems=null},mousewheel(t){let e=t;window.requestAnimationFrame(()=>{const t=this.objList.length-this.count;this.start-=Math.round(e.wheelDelta/120),this.start=Math.min(t,this.start),this.start=Math.max(0,this.start),this.changeTopFromStart(),this.updateDataList()})},changeTopFromStart(){document.querySelector("#scroller").style.top=this.start/(this.objList.length-this.count)*(this.topMax-11)+11+"px"},widthChanging(t,e){let i=t.target.parentElement;i.setAttribute("draggable",!1),this.wideEdit=!0;let s=i.getBoundingClientRect().width,o=t.clientX,a=t=>{window.requestAnimationFrame(()=>{this.wideEdit&&(this.fieldsConfig[e].width=s+t.clientX-o)})},n=t=>{this.wideEdit=!1,i.setAttribute("draggable",!0),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",a,{passive:!0}),document.addEventListener("mouseup",n)},scrollingLR(t){let e=t.target;var i=t.clientX-e.offsetLeft;let s=t=>{let e=t.clientX-i;e=Math.max(this.leftMin,e),e=Math.min(this.leftMax,e),this.scrollLRLeft=e;let s=(e-this.leftMin)/(this.leftMax-this.leftMin)*(this.conWidth-this.conFields[this.conFields.length-1].width),o=this.getCountX(s);this.x=o.left,this.count_x=o.count},o=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",s,{passive:!0}),document.addEventListener("mouseup",o)},getCountX(t){let e=0,i=0,s=0;for(let o=0,a=this.conFields.length;o<a;o++){let a=this.conFields[o].width||90;if(!(e+a<=t)){s=t-e;break}e+=a,i++}return{count:i,left:e,remain:s}},scrolling(t){let e=t.target;var i=t.clientY-e.offsetTop;let s=t=>{let s=t.clientY-i;s=Math.max(11,s),s=Math.min(this.topMax,s);let o=s-11,a=this.start;this.start=Math.round(o/(this.topMax-11)*(this.objList.length-this.count+1));const n=this.objList.length-this.count;this.start=Math.min(n,this.start),this.start!==a&&this.updateDataList(),e.style.top=s+"px"},o=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",s,{passive:!0}),document.addEventListener("mouseup",o)},initData(){this.getObjList().then(t=>{t.forEach((t,e)=>{this.$set(this.objList,e,t)}),this.updateDataList()}).catch(t=>{})},getObjList(){let t;return t=this.objReqParam.obj?this.objReqParam:0===this.DESC?Object.assign(this.objReqParam,{desc:!1,orderby:"JiaoYiDaiMa"}):Object.assign(this.objReqParam,{desc:1===this.DESC,orderby:this.ORDERBY}),new Promise((e,i)=>{this.dataQuery=this.$dzhyun.query("/stkdata",t,t=>{!t||t instanceof Error?i(t):e(t)})})},updateDataList(){this.cancelSubscribe(),this.objArr=this.objList.slice(this.start,this.start+this.count).map(t=>t.Obj);let t={obj:this.objArr.join(","),field:this.fields};this.setDataFromCache(),this.dataSubscribe=this.$dzhyun.subscribe("/stkdata",t,t=>{if(t&&!(t instanceof Error)){if(1===t.length){let e=t[0];return e.lastData=this.cacheData[e.Obj],this.setCacheData(e),window.cacheTimer&&(window.clearTimeout(window.cacheTimer),window.cacheTimer=null),void(window.cacheTimer=window.setTimeout(()=>{this.setDataFromCache()},this.cacheTimer))}for(let e=0,i=t.length;e<i;e++){let i=t[e];this.setDataItem(i),this.setCacheData(i)}}})},setDataFromCache(){this.objArr.forEach((t,e)=>{let i=this.dataList.find(e=>e&&e.Obj===t),s=this.cacheData[t];i&&s&&i.ZuiXinJia!==s.ZuiXinJia&&(s.ZuiXinJiaStyle=s.ZhangDieStyle=s.ZhangFuStyle=`animation: twinkling${i.ZuiXinJia>s.ZuiXinJia?"Green":"Red"} 1s ease-in 0s;`),this.$set(this.dataList,e,s||{})}),this.dataList.length=this.objArr.length},setDataItem(t){let e=this.objArr.findIndex(e=>e===t.Obj);this.$set(this.dataList,e,t)},setCacheData(t){this.$set(this.cacheData,t.Obj,t)},keydown(t,e){if(this.signEvent)return;const i=this.objList.length-this.count;let s,o=this.start;switch(t){case 38:s=this.objArr.findIndex(t=>t===this.focusedObj),s>0?(this.focusedObj=this.objArr[s-1],this.focusedIndex=this.start+s-1):(this.start=Math.max(0,this.start-1),this.start!==o&&(this.changeTopFromStart(),this.updateDataList()),0===s&&(this.focusedObj=this.objArr[0],this.focusedIndex=this.start));break;case 40:s=this.objArr.findIndex(t=>t===this.focusedObj),s>-1&&s<this.objArr.length-1?(this.focusedObj=this.objArr[s+1],this.focusedIndex=this.start+s+1):(this.start=Math.min(i,this.start+1),this.start!==o&&(this.changeTopFromStart(),this.updateDataList()),s===this.objArr.length-1&&(this.focusedObj=this.objArr[this.objArr.length-1],this.focusedIndex=this.start+this.objArr.length-1));break;case 33:this.start=Math.max(0,this.start-this.count),this.start!==o&&(this.changeTopFromStart(),this.updateDataList());break;case 34:this.start=Math.min(i,this.start+this.count),this.start!==o&&(this.changeTopFromStart(),this.updateDataList());break;case 35:this.start=i,this.start!==o&&(this.changeTopFromStart(),this.updateDataList());break;case 36:this.start=0,this.start!==o&&(this.changeTopFromStart(),this.updateDataList());break;case 37:if(this.count_x>0){let t=this.x,e=this.getCountX(t);e.remain>0?this.x=e.x:this.x=e.left-(this.conFields[this.count_x-1].width||90),this.count_x--,this.scrollLRLeft=this.x/(this.conWidth-this.conFields[this.conFields.length-1].width)*(this.leftMax-this.leftMin)+this.leftMin}break;case 39:if(this.count_x+1<this.conFields.length){let t=this.x,e=this.getCountX(t);this.x=e.left+(this.conFields[this.count_x].width||90),this.count_x++,this.scrollLRLeft=this.x/(this.conWidth-this.conFields[this.conFields.length-1].width)*(this.leftMax-this.leftMin)+this.leftMin}break;default:break}},mouseup(t){let e=t.target.parentElement.parentElement.getAttribute("name");this.focusedObj=e,this.focusedIndex=this.objArr.indexOf(e)+this.start,2===t.button?this.$emit("right-click",e):(this["timer"+this.i]=(new Date).getTime(),this.i+=1,this.timer1&&this.timer2&&this.timer2-this.timer1<300?(window.mouseup_timer&&(window.clearTimeout(window.mouseup_timer),window.mouseup_timer=null),this.$emit("dbl-click",e),this.i=1,this.timer1=void 0,this.timer2=void 0):this.timer1&&void 0===this.timer2&&(window.mouseup_timer=window.setTimeout(()=>{this.$emit("left-click",e),this.i=1,window.clearTimeout(window.mouseup_timer),window.mouseup_timer=null,this.timer1=void 0,this.timer2=void 0},300)))},async reSort(t){if(this.objReqParam.obj)return;let e=t.target.getAttribute("name");if(this.ORDERBY===e)switch(this.DESC){case 0:this.DESC=1;break;case 1:this.DESC=2;break;case 2:this.DESC=0;break;default:break}else this.ORDERBY=e,this.DESC=1;await this.initData();let i=this.start;this.start=0,this.start!==i&&(this.changeTopFromStart(),this.updateDataList())},cancelQuery(){this.dataQuery&&(this.dataQuery.cancel(),this.dataQuery=null)},cancelSubscribe(){this.dataSubscribe&&(this.dataSubscribe.cancel(),this.dataSubscribe=null)}},deactivated(){this.cancelAll()},beforeDestroy(){this.cancelAll()}},ht=lt,ct=(i("4f63"),Object(x["a"])(ht,q,$,!1,null,null,null)),dt=ct.exports;dt.install=function(t){t.component(dt.name,dt)};var ut=dt,mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"small-list-wrap"},[i("div",{staticClass:"small-list",attrs:{id:"smalist"}},[t.showTitle?i("div",{staticClass:"smalist-title",style:{backgroundColor:t.theme.tableTitleBgColor,color:t.theme.tableTitleColor,borderBottom:"1px solid "+t.theme.tableTitleBdColor}},t._l(t.fields,function(e,s){return i("span",{key:s,staticClass:"th",style:"width: "+100/t.fields.length+"%;border-right: 1px solid "+t.theme.tableTitleBdColor+";text-align:"+t.titleAlign,attrs:{name:e},on:{click:t.reSort}},[t._v("\n        "+t._s(t.title[e])+"\n        "),t.ORDERBY===e?i("i",{class:"iconfont icon-arrow-"+(2===t.DESC?"up":"")+(1===t.DESC?"down":"")}):t._e()])}),0):t._e(),i("div",{staticClass:"smalist-content",style:{color:t.theme.tableContentColor,backgroundColor:t.theme.tableContentBgColor,height:t.showTitle?"calc(100%-30px)":"100%"},attrs:{id:"smallcontent"},on:{"&mousewheel":function(e){return t.mousewheel(e)}}},[t.dataList.length?t._l(t.dataList,function(e,s){return i("div",{key:s,staticClass:"smalist-item",style:{textAlign:t.contentAlign,borderBottom:"1px solid "+t.theme.tableContentBdColor,backgroundColor:t.focusedObj===e.Obj?t.theme.tableContentActiveBgColor:t.hoverObj===e.Obj?t.theme.tableContentHoverBgColor:t.theme.tableContentBgColor,height:t.itemHeight+"px",lineHeight:t.itemHeight+"px"},attrs:{name:e.Obj},on:{contextmenu:function(t){t.preventDefault()},mouseup:function(i){return t.mouseup(i,e.Obj)},mouseover:function(i){t.hoverObj=e.Obj},mouseleave:function(e){t.hoverObj=""}}},[t._t("default",t._l(t.fields,function(s,o){return i("span",{key:o,style:e[s+"Style"]+";width: "+100/t.fields.length+"%;border-right: 1px solid "+t.theme.tableContentBdColor},[t._v("\n              "+t._s(t.format(e,s))+"\n            ")])}),{data:e,itemHeight:t.itemHeight,focusedObj:t.focusedObj})],2)}):[t._t("loading")]],2)]),t.showScroller?i("div",{staticClass:"table-scroller",style:{backgroundColor:t.theme.scrollerBgColor2,color:t.theme.scrollerBgColor2}},[i("div",{staticClass:"scroller-top",style:{backgroundColor:t.theme.scrollerBgColor1}},[i("i",{style:{borderColor:"transparent transparent"+t.theme.scrollerBgColor3+" transparent"}})]),i("div",{staticClass:"scroller-bottom",style:{backgroundColor:t.theme.scrollerBgColor1},attrs:{id:"scrollerBottom"}},[i("i",{style:{borderColor:t.theme.scrollerBgColor3+" transparent transparent transparent"}})]),i("div",{staticClass:"scroller-scrolling",style:{backgroundColor:t.theme.scrollerBgColor1},attrs:{id:"scroller"},on:{mousedown:t.scrolling}})]):t._e()])},ft=[],gt={name:"small-list",data(){return{start:0,count:0,itemHeight:0,objList:[],dataList:[],cacheData:{},activeIndex:-1,focusedObj:"",hoverObj:"",objArr:[],DESC:0,ORDERBY:"",i:1}},props:{theme:Object,title:Object,titleAlign:{type:String,validator(t){return st.oneOf(t,["left","center","right"])},default:"center"},contentAlign:{type:String,validator(t){return st.oneOf(t,["left","center","right"])},default:"center"},objReqParam:{type:Object,default(){return{gql:"block=市场/沪深市场/沪深A股",field:"ZhongWenJianCheng"}}},desc:{type:Number,validator(t){return st.oneOf(t,[0,1,2])},default:0},orderby:{type:String,default:"ZhangFu"},fields:{type:Array,default(){return["Obj","ZhongWenJianCheng","ZhangDie"]}},showTitle:{type:Boolean,default:!0},showScroller:{type:Boolean,default:!0},height:{type:Number,default:30},precision:{type:Number,default:2}},watch:{focusedObj(t){this.$emit("focused-ischange",t)}},created(){this.init()},mounted(){window.setTimeout(()=>{let t=document.querySelector("#smallcontent").offsetHeight;this.showTitle&&(t-=30),document.querySelector("#smallcontent").style.height=t+"px",this.count=Math.ceil(t/this.height),this.itemHeight=t/this.count,this.showScroller&&(this.topMax=document.querySelector("#smalist").offsetHeight-document.querySelector("#scroller").offsetHeight-(document.querySelector("#scrollerBottom").offsetHeight+1),this.topMin=document.querySelector("#scrollerBottom").offsetHeight+1)},20),this.DESC=this.desc,this.ORDERBY=this.orderby},methods:{init(){this.initData(),this.objReqParam.obj||(this.updateObjListInterval=window.setInterval(()=>{this.initData()},5e3)),this.keyupFunc=(t=>{t.preventDefault()}),this.keydownFunc=(t=>{t.preventDefault(),this.keydown(t.keyCode)}),document.onkeyup=this.keyupFunc,document.onkeydown=this.keydownFunc},format(t,e){if(!t||"{}"===JSON.stringify(t)||!e)return"--";let i=t[e];switch(e){case"Obj":i=(i||"").slice(2)||"--";break;case"ZhongWenJianCheng":break;case"ZuiXinJia":case"ZhangFu":case"FenZhongZhangFu5":i=this.formatPrice(i,this.precision);break;case"ZhangDie":i=this.formatPrice(i,this.precision,!0);break;default:i=this.formatPrice(i);break}return i},mouseup(t){let e=t.target.parentElement.getAttribute("name");this.focusedObj=e,2===t.button?this.$emit("right-click",e):(this["timer"+this.i]=(new Date).getTime(),this.i+=1,this.timer1&&this.timer2&&this.timer2-this.timer1<300?(window.mouseup_timer&&(window.clearTimeout(window.mouseup_timer),window.mouseup_timer=null),this.$emit("dbl-click",e),this.i=1,this.timer1=void 0,this.timer2=void 0):this.timer1&&void 0===this.timer2&&(window.mouseup_timer=window.setTimeout(()=>{this.$emit("left-click",e),this.i=1,window.clearTimeout(window.mouseup_timer),window.mouseup_timer=null,this.timer1=void 0,this.timer2=void 0},300)))},reSort(t){if(this.objReqParam.obj)return;let e=t.target.getAttribute("name");if(this.ORDERBY===e)switch(this.DESC){case 0:this.DESC=1;break;case 1:this.DESC=2;break;case 2:this.DESC=0;break;default:break}else this.ORDERBY=e,this.DESC=1;this.initData()},initData(){this.getObjList().then(t=>{this.objList=t,this.updateDataList()}).catch(t=>{})},getObjList(){let t;return t=this.objReqParam.obj?this.objReqParam:0===this.DESC?Object.assign(this.objReqParam,{desc:!1,orderby:"JiaoYiDaiMa"}):Object.assign(this.objReqParam,{desc:1===this.DESC,orderby:this.ORDERBY}),new Promise((e,i)=>{this.dataQuery=this.$dzhyun.query("/stkdata",t,t=>{!t||t instanceof Error?i(t):e(t)})})},updateDataList(){this.cancelSubscribe(),this.objArr=this.objList.slice(this.start,this.start+this.count).map(t=>t.Obj);let t={obj:this.objArr.join(","),field:this.fields};this.setDataFromCache(),this.dataSubscribe=this.$dzhyun.subscribe("/stkdata",t,t=>{if(t&&!(t instanceof Error)){if(1===t.length)return this.setCacheData(t[0]),window.cacheTimer&&(window.clearTimeout(window.cacheTimer),window.cacheTimer=null),void(window.cacheTimer=window.setTimeout(()=>{this.setDataFromCache()},100));for(let e=0,i=t.length;e<i;e++){let i=t[e];this.setDataItem(i),this.setCacheData(i)}}})},setDataFromCache(){this.objArr.forEach((t,e)=>{let i=this.dataList.find(e=>e&&e.Obj===t),s=this.cacheData[t];i&&s&&i.ZuiXinJia!==s.ZuiXinJia&&(s.ZuiXinJiaStyle=s.ZhangDieStyle=s.ZhangFuStyle=`animation: twinkling${i.ZuiXinJia>s.ZuiXinJia?"Green":"Red"} 1s ease-in 0s;`),this.$set(this.dataList,e,s||{})})},setDataItem(t){let e=this.objArr.findIndex(e=>e===t.Obj);this.$set(this.dataList,e,t)},setCacheData(t){this.cacheData[t.Obj]=t},cancelQuery(){this.dataQuery&&(this.dataQuery.cancel(),this.dataQuery=null)},cancelSubscribe(){this.dataSubscribe&&(this.dataSubscribe.cancel(),this.dataSubscribe=null)},mousewheel(t){const e=this.objList.length-this.count;this.start-=Math.round(t.wheelDelta/120),this.start=Math.min(e,this.start),this.start=Math.max(0,this.start),this.changeTopFromStart(),this.updateDataList(),-1!==this.activeIndex&&(document.querySelector(".smalist-content").childNodes[this.activeIndex].style.backgroundColor=this.theme.tableContentBgColor,this.activeIndex=this.objArr.findIndex(t=>t.Obj===this.focusedObj),-1!=this.activeIndex&&(document.querySelector(".smalist-content").childNodes[this.activeIndex].style.backgroundColor=this.theme.tableContentActiveBgColor))},changeTopFromStart(){if(this.showScroller){let t=document.querySelector("#scrollerBottom").offsetHeight;document.querySelector("#scroller").style.top=this.start/(this.objList.length-this.count)*(this.topMax-(t+1))+(t+1)+"px"}},scrolling(t){let e=t.target;var i=t.clientY-e.offsetTop;let s=t=>{let s=t.clientY-i;s=Math.max(this.topMin,s),s=Math.min(this.topMax,s);let o=s-this.topMin,a=this.start,n=this.objList.length-this.count;this.start=Math.round(o/(this.topMax-this.topMin)*n),this.start=Math.min(n,this.start),this.start!==a&&this.updateDataList(),e.style.top=s+"px"},o=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",s,{passive:!0}),document.addEventListener("mouseup",o)},changeActiveItem(t){let e=document.querySelector(".smalist-content").childNodes;t!==this.activeIndex&&(-1!==this.activeIndex&&(e[this.activeIndex].style.backgroundColor=this.theme.tableContentBgColor),e[t].style.backgroundColor=this.theme.tableContentActiveBgColor,this.activeIndex=t)},keydown(t){const e=this.objList.length-this.count;let i,s=this.start;switch(t){case 38:i=this.objArr.findIndex(t=>t===this.focusedObj),i>0?this.focusedObj=this.objArr[i-1]:(this.start=Math.max(0,this.start-1),this.start!==s&&(this.changeTopFromStart(),this.updateDataList()),0===i&&(this.focusedObj=this.objArr[0]));break;case 40:i=this.objArr.findIndex(t=>t===this.focusedObj),i>-1&&i<this.objArr.length-1?this.focusedObj=this.objArr[i+1]:(this.start=Math.min(e,this.start+1),this.start!==s&&(this.changeTopFromStart(),this.updateDataList()),i===this.objArr.length-1&&(this.focusedObj=this.objArr[this.objArr.length-1]));break;case 33:this.start=Math.max(0,this.start-this.count),this.start!==s&&(this.changeTopFromStart(),this.updateDataList());break;case 34:this.start=Math.min(e,this.start+this.count),this.start!==s&&(this.changeTopFromStart(),this.updateDataList());break;case 35:this.start=e,this.start!==s&&(this.changeTopFromStart(),this.updateDataList());break;case 36:this.start=0,this.start!==s&&(this.changeTopFromStart(),this.updateDataList());break;default:break}},formatPrice:st.formatPrice,formatRatio:st.formatRatio,formatStockText:st.formatStockText,formatColor:st.formatColor},activated(){this.init()},deactivated(){this.cancelQuery(),this.cancelSubscribe(),window.clearInterval(this.updateObjListInterval),document.onkeyup=null,document.onkeydown=null},beforeDestroy(){this.cancelQuery(),this.cancelSubscribe(),window.clearInterval(this.updateObjListInterval),document.onkeyup=null,document.onkeydown=null}},bt=gt,pt=(i("dde6"),Object(x["a"])(bt,mt,ft,!1,null,null,null)),Ct=pt.exports;Ct.install=function(t){t.component(Ct.name,Ct)};var wt=Ct,vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"static-small-list-wrap"},[i("div",{ref:"smalist",staticClass:"small-list"},[t.showTitle?i("div",{staticClass:"smalist-title",style:{backgroundColor:t.theme.tableTitleBgColor,color:t.theme.tableTitleColor,borderBottom:"1px solid "+t.theme.tableTitleBdColor}},t._l(t.fields,function(e,s){return i("span",{key:s,staticClass:"th",style:"width: "+100/t.fields.length+"%;border-right: 1px solid "+t.theme.tableTitleBdColor+";text-align:"+t.titleAlign,attrs:{name:e}},[t._v("\n        "+t._s(t.title[e])+"\n        "),t.ORDERBY===e?i("i",{class:"iconfont icon-arrow-"+(2===t.DESC?"up":"")+(1===t.DESC?"down":"")}):t._e()])}),0):t._e(),i("div",{ref:"smallcontent",staticClass:"smalist-content",style:{color:t.theme.tableContentColor,backgroundColor:t.theme.tableContentBgColor,height:t.showTitle?"calc(100%-30px)":"100%"},on:{"&mousewheel":function(e){return t.mousewheel(e)}}},[t.dataList.length?t._l(t.dataList,function(e,s){return i("div",{key:s,staticClass:"smalist-item",style:{textAlign:t.contentAlign,backgroundColor:t.focusedObj===e.DaiMa?t.theme.tableContentActiveBgColor:t.hoverObj===e.DaiMa?t.theme.tableContentHoverBgColor:t.theme.tableContentBgColor,height:t.itemHeight+"px",lineHeight:t.itemHeight+"px"},attrs:{name:e.DaiMa},on:{contextmenu:function(t){t.preventDefault()},mouseup:function(i){return t.mouseup(i,e.DaiMa)},mouseover:function(i){t.hoverObj=e.DaiMa},mouseleave:function(e){t.hoverObj=""}}},[t._t("default",t._l(t.fields,function(s,o){return i("span",{key:o,style:e[s+"Style"]+";borderBottom: '1px solid ' + theme.tableContentBdColor; width: "+100/t.fields.length+"%;border-right: 1px solid "+t.theme.tableContentBdColor},[t._v("\n              "+t._s(e[s]||"--")+"\n            ")])}),{data:e,itemHeight:t.itemHeight,focusedObj:t.focusedObj})],2)}):[t._t("loading")]],2)]),t.showScroller?i("div",{staticClass:"table-scroller",style:{backgroundColor:t.theme.scrollerBgColor2,color:t.theme.scrollerBgColor2}},[i("div",{staticClass:"scroller-top",style:{backgroundColor:t.theme.scrollerBgColor1}},[i("i",{style:{borderColor:"transparent transparent"+t.theme.scrollerBgColor3+" transparent"}})]),i("div",{ref:"scrollerBottom",staticClass:"scroller-bottom",style:{backgroundColor:t.theme.scrollerBgColor1}},[i("i",{style:{borderColor:t.theme.scrollerBgColor3+" transparent transparent transparent"}})]),i("div",{ref:"scroller",staticClass:"scroller-scrolling",style:{backgroundColor:t.theme.scrollerBgColor1},on:{mousedown:t.scrolling}})]):t._e()])},yt=[],jt={name:"static-small-list",props:{theme:Object,fields:{type:Array,default(){return["Obj","ZhongWenJianCheng","ZhangDie"]}},showTitle:{type:Boolean,default:!0},title:Object,titleAlign:{type:String,validator(t){return st.oneOf(t,["left","center","right"])},default:"center"},contentAlign:{type:String,validator(t){return st.oneOf(t,["left","center","right"])},default:"center"},objReqParam:{type:Object,default(){return{gql:"block=市场/沪深市场/沪深A股",field:"ZhongWenJianCheng"}}},desc:{type:Number,validator(t){return st.oneOf(t,[0,1,2])},default:0},orderby:{type:String,default:"ZhangFu"},showScroller:{type:Boolean,default:!0},height:{type:Number,default:30},objList:{type:Array,default(){return[]}},FOCUSOBJ:{type:String,default:""}},data(){return{start:0,count:0,itemHeight:0,dataList:[],activeIndex:-1,focusedObj:this.FOCUSOBJ,hoverObj:"",i:1}},watch:{focusedObj(t){this.$emit("focused-ischange",t)},objList:{handler(t){this.objList=t,this.updateDataList()},deep:!0},FOCUSOBJ(t){this.focusedObj=t}},methods:{init(){this.init.isInited||(this.init.isInited=!0,document.addEventListener("keyup",this.keyupFunc),document.addEventListener("keydown",this.keydownFunc),window.setTimeout(()=>{let t=this.$refs.smallcontent.offsetHeight;this.showTitle&&(t-=30),this.$refs.smallcontent.style.height=t+"px",this.count=Math.ceil(t/this.height),this.itemHeight=t/this.count,this.showScroller&&(this.topMax=this.$refs.smalist.offsetHeight-this.$refs.scroller.offsetHeight-(this.$refs.scrollerBottom.offsetHeight+1),this.topMin=this.$refs.scrollerBottom.offsetHeight+1),this.updateDataList()}))},updateDataList(){for(let t=0;t<this.count;t++)this.$set(this.dataList,t,this.objList[t+this.start]||{})},keydownFunc(t){t.preventDefault(),this.keydown(t.keyCode)},keyupFunc(t){t.preventDefault()},destroy(){document.removeEventListener("keyup",this.keyupFunc),document.removeEventListener("keydown",this.keydownFunc),this.init.isInited=!1},format(t,e){return t&&"{}"!==JSON.stringify(t)&&e?t[e]:"--"},mouseup(t,e){this.focusedObj=e,2===t.button?this.$emit("right-click",e):(this["timer"+this.i]=(new Date).getTime(),this.i+=1,this.timer1&&this.timer2&&this.timer2-this.timer1<300?(window.mouseup_timer&&(window.clearTimeout(window.mouseup_timer),window.mouseup_timer=null),this.$emit("dbl-click",e),this.i=1,this.timer1=void 0,this.timer2=void 0):this.timer1&&void 0===this.timer2&&(window.mouseup_timer=window.setTimeout(()=>{this.$emit("left-click",e),this.i=1,window.clearTimeout(window.mouseup_timer),window.mouseup_timer=null,this.timer1=void 0,this.timer2=void 0},300)))},mousewheel(t){const e=this.objList.length-this.count;this.start-=Math.round(t.wheelDelta/120),this.start=Math.min(e,this.start),this.start=Math.max(0,this.start),this.changeTopFromStart(),this.updateDataList(),-1!==this.activeIndex&&(this.$refs.smalistcontent.childNodes[this.activeIndex].style.backgroundColor=this.theme.tableContentBgColor,this.activeIndex=this.dataList.findIndex(t=>t.DaiMa===this.focusedObj),-1!==this.activeIndex&&(this.$refs.smalistcontent.childNodes[this.activeIndex].style.backgroundColor=this.theme.tableContentActiveBgColor))},changeTopFromStart(){if(this.showScroller){let t=this.$refs.scrollerBottom.offsetHeight;this.$refs.scroller.style.top=this.start/(this.objList.length-this.count)*(this.topMax-(t+1))+(t+1)+"px"}},scrolling(t){let e=t.target;var i=t.clientY-e.offsetTop;let s=t=>{let s=t.clientY-i;s=Math.max(this.topMin,s),s=Math.min(this.topMax,s);let o=s-this.topMin,a=this.start,n=this.objList.length-this.count;this.start=Math.round(o/(this.topMax-this.topMin)*n),this.start=Math.min(n,this.start),this.start!==a&&this.updateDataList(),e.style.top=s+"px"},o=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",s,{passive:!0}),document.addEventListener("mouseup",o)},keydown(t){const e=this.objList.length-this.count;let i,s=this.start;switch(t){case 38:i=this.dataList.findIndex(t=>t.DaiMa===this.focusedObj),i>0?this.focusedObj=this.dataList[i-1].DaiMa:(this.start=Math.max(0,this.start-1),this.start!==s&&(this.changeTopFromStart(),this.updateDataList(),this.focusedObj=this.dataList[0].DaiMa));break;case 40:i=this.dataList.findIndex(t=>t.DaiMa===this.focusedObj),i>-1&&i<this.dataList.length-1?this.focusedObj=this.dataList[i+1].DaiMa:(this.start=Math.min(e,this.start+1),this.start!==s&&(this.changeTopFromStart(),this.updateDataList(),this.focusedObj=this.dataList[this.dataList.length-1].DaiMa));break;case 33:this.start=Math.max(0,this.start-this.count),this.start!==s&&(this.changeTopFromStart(),this.updateDataList());break;case 34:this.start=Math.min(e,this.start+this.count),this.start!==s&&(this.changeTopFromStart(),this.updateDataList());break;case 35:this.start=e,this.start!==s&&(this.changeTopFromStart(),this.updateDataList());break;case 36:this.start=0,this.start!==s&&(this.changeTopFromStart(),this.updateDataList());break;default:break}}},created(){this.init()},activated(){this.init()},deactivated(){this.destroy()},beforeDestroy(){this.destroy()}},xt=jt,St=(i("8dc3"),Object(x["a"])(xt,vt,yt,!1,null,null,null)),kt=St.exports;kt.install=function(t){t.component(kt.name,kt)};var Ot=kt;const Dt=[ut,wt,Ot],Lt=function(t){Lt.installed||(Dt.map(e=>t.component(e.name,e)),t.prototype.$Utils=st,t.Utils=st)};"undefined"!==typeof window&&window.Vue&&Lt(window.Vue);var Bt={install:Lt,largeList:ut,smallList:wt,staticSmallList:Ot},Tt=i("010e"),Ht=i.n(Tt);i("4c94");s["default"].use(Bt),s["default"].config.productionTip=!1,s["default"].use(Ht.a,{address:"ws://gw.yundzh.com/ws",dataType:"json",token:Promise.resolve("0000003c:1589594368:f6fb8d92d6ca7385184827a591ef56384c73cf42")}),new s["default"]({render:t=>t(P)}).$mount("#app")},c62a:function(t,e,i){"use strict";var s=i("a2c1"),o=i.n(s);o.a},dde6:function(t,e,i){"use strict";var s=i("f921"),o=i.n(s);o.a},df10:function(t,e,i){"use strict";var s=i("429a"),o=i.n(s);o.a},e278:function(t,e,i){},e9f1:function(t,e,i){"use strict";var s=i("e278"),o=i.n(s);o.a},f921:function(t,e,i){}});
//# sourceMappingURL=index.2fb0c06d.js.map